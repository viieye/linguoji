<body style="background-color: #222;">
    <canvas id="canvas" width="200" height="200"></canvas>
</body>
<script type="text/javascript" charset="utf-8">
function isiz(cnum1) {
    return Math.abs(cnum1[0]+cnum1[1])
}
function imag(cnum1) {
    return Math.sqrt(cnum1[0]*cnum1[0]+cnum1[1]*cnum1[1])
}
function imas(cnum1,cnum2) {
  return [cnum1[0]+cnum2[0],cnum1[1]+cnum2[1]]
}
    
function imul(cnum1,cnum2) {
  let comps = [
      cnum1[0]*cnum2[0],
      cnum1[1]*cnum2[0],
      cnum1[0]*cnum2[1],
      cnum1[1]*cnum2[1]]
  return [comps[0]-comps[3],comps[1]+comps[2]]
}
    
function iqua(cnum1,cnum2) {
    if (cnum1[0]==cnum2[0]&&cnum1[1]==cnum2[1]) {
        return 1
    }
    return 0
}

const im = [0,1]
var canvas = document.getElementById("canvas")
var contxt = canvas.getContext("2d")

setTimeout(main,50)
var wihi = [200,200]
var zumu = [1,1]
var ceta = [-0.744526939085,0.100051327305]
var qule = 640

function main() {
    let zmcoefft = 5
    for (let i = 0; i < 109; i++) {
        zmcoefft=zmcoefft*.8
        zumu = [zmcoefft,zmcoefft]
        setTimeout(render,i*200,wihi,zumu,ceta,qule)
    }
}

function render(wh,zm,ct,ql) {
    canvas.width =wh[0]
    canvas.height=wh[1]
    let ansar = []
    for (let j = 0; j < wh[1]; j++) {
        let ansrw = []
        for (let i = 0; i < wh[0]; i++) {
            let ctron = [(i-wh[0])*zm[0]/wh[0]+zm[0]*.5+ct[0],(j-wh[1])*zm[1]/wh[1]+zm[1]*.5-ct[1]]
            ansrw.push(ztronfunk(ctron,ql,16))
        }   
        ansar.push(ansrw)
    }
    // console.log(ansar)
    contxt.fillStyle = "#000"
    contxt.fillRect(0,0,wh[0],wh[1])
    for (let j = 0; j < wh[1]; j++) {
        for (let i = 0; i < wh[0]; i++) {
            let compr = ansar[j][i][0]
            contxt.fillStyle = "#444"
            if (compr>ql/8) {
                contxt.fillStyle = "#888"
            }
            if (compr>ql/4) {
                contxt.fillStyle = "#bbb"
            }
            if (compr>ql/2) {
                contxt.fillStyle = "#fff"
            }
            if (compr>0) {
                contxt.fillRect(i,j,1,1)
            }
        }   
    }
}

function ctronfunk(ctron,itr,max) {
    let ztron = [0,0]
    let anss = [ztron]
    for (let i = 0; i < itr; i++) {
        // console.log(ztron,ctron)
        let candt = imas(ctron,imul(ztron,ztron)) 
        if (max<isiz(candt)) {
            return [ztron,anss,imag(ztron),0,itr]
        }
        ztron = candt
        if (isin(ztron,anss)==0) {
            anss.push(ztron)
        }
    }
    return [ztron,anss,imag(ztron),itr-anss.length,0]
}

function ztronfunk(ctron,itr,max) {
    let ztron = [0,0]
    let anss = [ztron]
    for (let i = 0; i < itr; i++) {
        // console.log(ztron,ctron)
        let candt = [ztron[0]**2-ztron[1]**2+ctron[0],2*ztron[0]*ztron[1]+ctron[1]]
        ztron = candt
        if (isiz(ztron)>max) {
            return [i]
        }
    }
    return [itr]
}

function isin(el,arr,verbozze) {
    for (let i = 0; i < arr.length; i++) {
        if (iqua(arr[i],el)==1) { return 1 }
    }
    return 0
}
</script>